import streamlit as st
import base64

# ==== Fungsi untuk background dengan gambar lokal ====
def add_bg_from_local(image_file):
    with open(image_file, "rb") as f:
        data = f.read()
    encoded = base64.b64encode(data).decode()
    css = f"""
    <style>
    /* === Background dengan Overlay === */
    .stApp {{
        background: linear-gradient(rgba(0,0,0,0.25), rgba(0,0,0,0.25)),
                    url(data:image/png;base64,{encoded});
        background-size: cover;
        background-attachment: fixed;
        font-family: 'Poppins', sans-serif;
        color: #f8f9fa;
    }}

    /* === Heading & Title === */
    h1, h2, h3, h4 {{
        font-weight: 700;
        color: #ffffff;
        text-shadow: 1px 1px 3px rgba(0,0,0,0.6);
    }}

    /* === Sidebar Styling === */
    [data-testid="stSidebar"] {{
        background: rgba(0, 0, 0, 0.75);
        color: #ffffff;
    }}

    [data-testid="stSidebar"] h1,
    [data-testid="stSidebar"] h2,
    [data-testid="stSidebar"] h3 {{
        color: #ffffff;
    }}

    /* === Card / Container untuk konten utama === */
    .block-container {{
        background: rgba(255, 255, 255, 0.12);
        backdrop-filter: blur(6px);
        border-radius: 16px;
        padding: 2rem;
        box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    }}

    /* === Teks paragraf utama === */
    p {{
        font-size: 1rem;
        color: #f1f1f1;
    }}

    /* === Tombol === */
    .stButton>button {{
        background: linear-gradient(90deg, #ff6a00, #ee0979);
        color: white;
        font-weight: 600;
        border-radius: 12px;
        padding: 0.6rem 1.2rem;
        border: none;
        box-shadow: 0px 4px 10px rgba(0,0,0,0.4);
        transition: 0.3s;
    }}
    .stButton>button:hover {{
        background: linear-gradient(90deg, #ee0979, #ff6a00);
        transform: scale(1.05);
    }}

    /* === Tabel Data === */
    [data-testid="stTable"] {{
        background: rgba(0, 0, 0, 0.6);
        color: #ffffff;
        border-radius: 10px;
        overflow: hidden;
    }}

    /* === Grafik Plotly / Matplotlib === */
    .js-plotly-plot .plotly {{
        background: rgba(0, 0, 0, 0.4) !important;
        border-radius: 16px;
    }}

    /* === Input Field === */
    .stTextInput>div>div>input {{
        background: rgba(255,255,255,0.1);
        color: white;
        border-radius: 10px;
    }}
    </style>
    """
    st.markdown(css, unsafe_allow_html=True)

# ==== Panggil fungsi untuk set background ====
add_bg_from_local("samsat.jpg")

# ==== Contoh konten di dashboard ====
st.title("ðŸ“Š Dashboard Analisis Samsat")
st.write("Background sudah pakai gambar samsat dengan overlay transparan.")
st.button("Klik Saya")
